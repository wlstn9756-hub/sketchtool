{% extends "base.html" %}
{% block title %}설정 - 블로그 자동화{% endblock %}

{% block content %}
<h2 class="mb-4">설정</h2>

<form action="/settings/save" method="post">
    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-key"></i> API 키 설정
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label class="form-label">ChatGPT API 키</label>
                <input type="password" name="chatgpt_api_key" class="form-control"
                       value="{{ settings.get('chatgpt_api_key', '') }}"
                       placeholder="sk-...">
                <small class="text-muted">
                    <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a>에서 API 키를 발급받으세요
                </small>
            </div>
            <div class="mb-3">
                <label class="form-label">Pixabay API 키 (선택)</label>
                <input type="password" name="pixabay_api_key" class="form-control"
                       value="{{ settings.get('pixabay_api_key', '') }}"
                       placeholder="픽사베이 API 키">
                <small class="text-muted">
                    <a href="https://pixabay.com/api/docs/" target="_blank">Pixabay API</a>에서 무료로 발급받을 수 있습니다
                </small>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-file-text"></i> 기본 프롬프트
        </div>
        <div class="card-body">
            <div class="mb-3">
                <label class="form-label">기본 GPT 프롬프트 템플릿</label>
                <textarea name="default_prompt" class="form-control" rows="10"
                          placeholder="블로그 글 생성을 위한 기본 프롬프트를 입력하세요...">{{ settings.get('default_prompt', '') }}</textarea>
                <small class="text-muted">
                    사용 가능한 변수: {placeName}, {placeAddress}, {mainKeyword}, {bottomTags}, {forbiddenWords}
                </small>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header">
            <i class="bi bi-server"></i> 서버 정보
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p><strong>API 주소:</strong></p>
                    <code>http://localhost:8000/</code>
                    <p class="text-muted mt-2">
                        JAR 파일의 <code>config/Config.java</code>에서 이 주소를 설정하세요.
                    </p>
                </div>
                <div class="col-md-6">
                    <p><strong>JAR 설정 방법:</strong></p>
                    <pre class="bg-light p-2 rounded"><code>API_BASE_URL = "http://localhost:8000/"</code></pre>
                </div>
            </div>
        </div>
    </div>

    <button type="submit" class="btn btn-primary btn-lg">
        <i class="bi bi-save"></i> 설정 저장
    </button>
</form>
{% endblock %}
